# ========================================
# One Agent 4J é…ç½®æ–‡ä»¶
# ========================================
# ğŸ“Œ çº¦å®šä¼˜äºé…ç½®ï¼šå¼•å…¥ä¾èµ–åï¼Œæ‰€æœ‰åŠŸèƒ½é»˜è®¤è‡ªåŠ¨å¯ç”¨
#
# âœ… å¿…é¡»é…ç½®ï¼ˆ3é¡¹ï¼‰ï¼š
#    1. æ•°æ®åº“è¿æ¥
#    2. è´£ä»»äººé…ç½®ï¼ˆé»˜è®¤è´£ä»»äººï¼‰
#    3. AI API Keyï¼ˆå¦‚æœå¯ç”¨ AI å»å™ªï¼‰
#
# âš™ï¸  å¯é€‰é…ç½®ï¼šæ ¹æ®éœ€è¦è°ƒæ•´å„å±‚é™å™ªç­–ç•¥
#
# ğŸ“– é…ç½®ç¤ºä¾‹ï¼š
#    - å®Œæ•´é…ç½®ï¼šè§æœ¬æ–‡ä»¶ï¼ˆå¸¦è¯¦ç»†æ³¨é‡Šï¼‰
#    - æœ€å°é…ç½®ï¼šåªéœ€é…ç½®æ•°æ®åº“ + è´£ä»»äººå³å¯
#    - YAMLæ ¼å¼ï¼šå¯å°†æœ¬æ–‡ä»¶è½¬æ¢ä¸º application.ymlï¼ˆæ¨èä½¿ç”¨ propertiesï¼‰
# ========================================

# ========== åº”ç”¨åŸºç¡€é…ç½® ==========
spring.application.name=one-agent-4j
spring.profiles.active=dev
server.port=8080

# ========================================
# âœ… å¿…å¡«é…ç½®åŒº
# ========================================

# ========== æ•°æ®åº“é…ç½®ï¼ˆå¿…é¡»ï¼‰==========
spring.datasource.url=jdbc:mysql://localhost:3306/one_agent?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ========== è´£ä»»äººé…ç½®ï¼ˆå¿…é¡»ï¼‰==========
# ğŸ“Œ è´£ä»»äººé…ç½®è¯´æ˜ï¼š
#    - ç”¨äºå·¥å•è‡ªåŠ¨åˆ†æ´¾å’Œé£ä¹¦ @ æé†’
#    - ä¼˜åŒ–ç‰ˆï¼šä½¿ç”¨ yml é…ç½®æ›¿ä»£æ•°æ®åº“è¡¨ï¼ˆé€‚åˆå›¢é˜Ÿäººå‘˜å›ºå®šåœºæ™¯ï¼‰
#
# ğŸ”§ é…ç½®ç¤ºä¾‹ï¼š
#    æ ¹æ®ä½ çš„å›¢é˜Ÿå®é™…æƒ…å†µä¿®æ”¹ä»¥ä¸‹é…ç½®
#    - default-owner: å½“æœåŠ¡æœªé…ç½®ä¸“å±è´£ä»»äººæ—¶ä½¿ç”¨
#    - service-owners: ä¸ºæ¯ä¸ªæœåŠ¡æŒ‡å®šè´£ä»»äººï¼ˆå¯é€‰ï¼‰
#    - feishu-mapping: è´£ä»»äººä¸é£ä¹¦ OpenID çš„æ˜ å°„ï¼ˆå¯é€‰ï¼‰

# é»˜è®¤è´£ä»»äººç”¨æˆ·ç¼–ç ï¼ˆå¿…å¡«ï¼å¯åŠ¨æ—¶ä¼šæ ¡éªŒï¼‰
one-agent.responsibility.default-owner=zhangsan

# æœåŠ¡è´£ä»»äººæ˜ å°„ï¼ˆå¯é€‰ï¼Œæ ¼å¼ï¼šæœåŠ¡å=è´£ä»»äººç¼–ç ï¼‰
# ç¤ºä¾‹ï¼šä¸ºä¸åŒæœåŠ¡æŒ‡å®šä¸åŒçš„è´£ä»»äºº
one-agent.responsibility.service-owners.payment-service=lisi
one-agent.responsibility.service-owners.order-service=wangwu
one-agent.responsibility.service-owners.user-service=zhangsan
# ç»§ç»­æ·»åŠ æ›´å¤šæœåŠ¡æ˜ å°„...
# one-agent.responsibility.service-owners.your-service-name=your-owner

# é£ä¹¦ OpenID æ˜ å°„ï¼ˆå¯é€‰ï¼Œç”¨äºé£ä¹¦é€šçŸ¥æ—¶ @ æé†’ï¼‰
# æ ¼å¼ï¼šè´£ä»»äººç¼–ç =é£ä¹¦OpenID
# å¦‚ä½•è·å–é£ä¹¦ OpenIDï¼šåœ¨é£ä¹¦ç®¡ç†åå°æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ–è”ç³»é£ä¹¦ç®¡ç†å‘˜
one-agent.responsibility.feishu-mapping.zhangsan=ou_1234567890abcdef
one-agent.responsibility.feishu-mapping.lisi=ou_abcdef1234567890
one-agent.responsibility.feishu-mapping.wangwu=ou_fedcba0987654321
# ç»§ç»­æ·»åŠ æ›´å¤šé£ä¹¦æ˜ å°„...
# one-agent.responsibility.feishu-mapping.your-owner=ou_xxx

# ğŸ’¡ ä½¿ç”¨æç¤ºï¼š
#    1. æœ€å°‘åªéœ€é…ç½® default-ownerï¼Œå…¶ä»–éƒ½æ˜¯å¯é€‰çš„
#    2. å¦‚æœæœåŠ¡æ²¡æœ‰é…ç½®ä¸“å±è´£ä»»äººï¼Œä¼šä½¿ç”¨ default-owner
#    3. å¦‚æœæ²¡æœ‰é…ç½®é£ä¹¦æ˜ å°„ï¼Œé€šçŸ¥æ—¶ä¸ä¼š @ ç”¨æˆ·
#    4. é…ç½®ä¿®æ”¹åéœ€è¦é‡å¯åº”ç”¨ç”Ÿæ•ˆ

# ========== AI æ¨¡å‹é…ç½®ï¼ˆå¯ç”¨ AI å»å™ªæ—¶å¿…é¡»ï¼‰==========
langchain4j.open-ai.chat-model.api-key=${OPENAI_API_KEY:}
langchain4j.open-ai.chat-model.base-url=${OPENAI_BASE_URL:https://api.siliconflow.cn}
langchain4j.open-ai.chat-model.model-name=${OPENAI_MODEL_NAME:deepseek-ai/DeepSeek-V3}
langchain4j.open-ai.chat-model.temperature=0.7
langchain4j.open-ai.chat-model.max-tokens=2000
langchain4j.open-ai.chat-model.timeout=60

# ========================================
# âš™ï¸ å¯é€‰é…ç½®åŒºï¼ˆæŒ‰éœ€è°ƒæ•´ï¼‰
# ========================================

# ========== One Agent æ€»å¼€å…³ ==========
# æ˜¯å¦å¯ç”¨ One Agentï¼ˆé»˜è®¤ trueï¼‰
# one-agent.enabled=true

# ========== å­˜å‚¨ç­–ç•¥é…ç½® ==========
# æ˜¯å¦å¯ç”¨æœ¬åœ°æŒä¹…åŒ–ï¼ˆé»˜è®¤ trueï¼‰
# one-agent.storage-strategy.enable-local-persistence=true
# æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆå·¥å•ï¼ˆé»˜è®¤ trueï¼‰
# one-agent.storage-strategy.enable-ticket-generation=true

# ========================================
# ğŸ”» å¤šå±‚é™å™ªé…ç½®
# ========================================

# ========== Layer 0: åŸºç¡€è¿‡æ»¤ï¼ˆIgnore Listï¼‰==========
# å¿½ç•¥çš„å¼‚å¸¸ç±»å‹ï¼ˆå®Œæ•´ç±»åæˆ–ç®€å•ç±»åï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰
one-agent.ignore-list.exception-types=AccessDeniedException,NoHandlerFoundException,HttpRequestMethodNotSupportedException

# å¿½ç•¥çš„åŒ…å‰ç¼€ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰
one-agent.ignore-list.package-prefixes=org.springframework.boot.actuate,springfox.documentation

# å¿½ç•¥çš„é”™è¯¯ä½ç½®ï¼ˆæ”¯æŒé€šé…ç¬¦ *ï¼Œæ ¼å¼ï¼šç±»å.æ–¹æ³•å æˆ– *.æ–¹æ³•åï¼‰
one-agent.ignore-list.error-locations=*.health,*.heartbeat,*.ping

# å¿½ç•¥åŒ…å«ç‰¹å®šå…³é”®è¯çš„å¼‚å¸¸æ¶ˆæ¯ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰
one-agent.ignore-list.message-keywords=health check,heartbeat,actuator,swagger

# å¿½ç•¥ç‰¹å®š HTTP çŠ¶æ€ç çš„å¼‚å¸¸ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰
one-agent.ignore-list.http-status-codes=404,401,403

# ========== Layer 1: æŒ‡çº¹å»é‡ï¼ˆFingerprint Deduplicationï¼‰==========
# æ—¶é—´çª—å£ï¼ˆåˆ†é’Ÿï¼Œé»˜è®¤ 2ï¼‰- åœ¨æ­¤æ—¶é—´çª—å£å†…ï¼Œç›¸åŒæŒ‡çº¹çš„å¼‚å¸¸åªå¤„ç†ä¸€æ¬¡
# one-agent.dedup.time-window-minutes=2

# ========== Layer 1.5: è§„åˆ™å¼•æ“ï¼ˆRule Engineï¼‰==========
# é¢‘ç‡é™åˆ¶è§„åˆ™ï¼ˆé˜²æ­¢å¼‚å¸¸é£æš´ï¼‰
# one-agent.rule-engine.frequency-limit.enabled=true
# one-agent.rule-engine.frequency-limit.window-minutes=5
# one-agent.rule-engine.frequency-limit.max-count=10

# æ—¶é—´çª—å£è§„åˆ™ï¼ˆéå·¥ä½œæ—¶é—´åªå‘Šè­¦é«˜ä¼˜å…ˆçº§ï¼‰
# one-agent.rule-engine.time-window.enabled=false
# one-agent.rule-engine.time-window.quiet-hours=2-6
# one-agent.rule-engine.time-window.allowed-severities=P0

# ç¯å¢ƒè§„åˆ™ï¼ˆä¸åŒç¯å¢ƒä¸åŒç­–ç•¥ï¼‰
# one-agent.rule-engine.environment.enabled=false
# one-agent.rule-engine.environment.test-filter-severities=P3,P4

# ========== Layer 2: AI æ™ºèƒ½å»å™ªï¼ˆAI Intelligent Denoiseï¼‰==========
# æ˜¯å¦å¯ç”¨ AI å»å™ªï¼ˆé»˜è®¤ falseï¼Œéœ€è¦é…ç½® AI API Keyï¼‰
one-agent.ai-denoise.enabled=true

# AI å»å™ªå›çœ‹æ—¶é—´çª—å£ï¼ˆåˆ†é’Ÿï¼Œé»˜è®¤ 2ï¼‰- æŸ¥è¯¢å¤šä¹…å†…çš„å†å²å¼‚å¸¸
# one-agent.ai-denoise.lookback-minutes=2

# AI å»å™ªå†å²è®°å½•æ•°é‡ï¼ˆé»˜è®¤ 20ï¼‰- æœ€å¤šæŸ¥è¯¢å¤šå°‘æ¡å†å²è®°å½•
# one-agent.ai-denoise.max-history-records=20

# AI å†³ç­–ç»“æœç¼“å­˜ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
# one-agent.ai-denoise.cache-enabled=true
# one-agent.ai-denoise.cache-ttl-minutes=5
# one-agent.ai-denoise.max-cache-size=10000

# ========================================
# ğŸ“ HTTP è¯·æ±‚æ—¥å¿—é…ç½®
# ========================================
# æ…¢è¯·æ±‚é˜ˆå€¼ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤ 3000ï¼‰- è¶…è¿‡æ­¤å€¼ä¼šæ‰“å° WARN çº§åˆ«æ—¥å¿—
# one-agent.http-log.slow-request-threshold=3000

# æ’é™¤çš„ URI å‰ç¼€ï¼ˆä¸æ‰“å°æ—¥å¿—ï¼‰
one-agent.http-log.exclude-uri-prefixes=/actuator,/swagger,/v2/api-docs,/v3/api-docs

# æ’é™¤çš„å…·ä½“ URIï¼ˆç²¾ç¡®åŒ¹é…ï¼‰
one-agent.http-log.exclude-uris=/favicon.ico,/health,/ping

# ========================================
# ğŸ’¾ MyBatis-Plus é…ç½®
# ========================================
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
mybatis-plus.global-config.db-config.id-type=auto

# ========================================
# â° å®šæ—¶ä»»åŠ¡é…ç½®
# ========================================
# Spring Boot å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± é…ç½®
spring.task.scheduling.pool.size=2
spring.task.scheduling.thread-name-prefix=one-agent-scheduler-

# å®šæ—¶ä»»åŠ¡è¯´æ˜ï¼š
# 1. å°æ—¶ç»Ÿè®¡èšåˆ: æ¯å°æ—¶ç¬¬5åˆ†é’Ÿæ‰§è¡Œ (cron = "0 5 * * * ?")
# 2. æ¯æ—¥ç»Ÿè®¡èšåˆ: æ¯å¤©å‡Œæ™¨1ç‚¹æ‰§è¡Œ (cron = "0 0 1 * * ?")
# 3. è¡¥å¿èšåˆ: æ¯å‘¨æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œï¼Œä¿®å¤è¿‡å»7å¤©æ•°æ® (cron = "0 0 2 ? * SUN")

# å¦‚éœ€ç¦ç”¨æ‰€æœ‰å®šæ—¶ä»»åŠ¡ï¼Œåœ¨ Application.java ä¸­ç§»é™¤ @EnableScheduling æ³¨è§£

# ========================================
# ğŸ“‹ æ—¥å¿—é…ç½®
# ========================================
logging.level.root=INFO
logging.level.com.all.in.one.agent=DEBUG

# ========================================
# ğŸ¯ å¿«é€Ÿå¼€å§‹æŒ‡å—
# ========================================
# 1. ä¿®æ”¹æ•°æ®åº“è¿æ¥: spring.datasource.*
# 2. é…ç½®è´£ä»»äºº: one-agent.responsibility.default-owner
# 3. é…ç½® AI API Key: langchain4j.open-ai.chat-model.api-key
# 4. å¯åŠ¨åº”ç”¨å³å¯ï¼Œæ‰€æœ‰åŠŸèƒ½è‡ªåŠ¨å¯ç”¨ï¼
#
# é»˜è®¤å¯ç”¨çš„åŠŸèƒ½ï¼š
# âœ… å¼‚å¸¸è‡ªåŠ¨æ•è·ï¼ˆAOP + Filter + ControllerAdviceï¼‰
# âœ… HTTP è¯·æ±‚æ—¥å¿—ï¼ˆrequest + responseï¼‰
# âœ… å¤šå±‚é™å™ªï¼ˆLayer 0/1/1.5/2ï¼‰
# âœ… å¼‚å¸¸æŒä¹…åŒ–ï¼ˆapp_alarm_record è¡¨ï¼‰
# âœ… å·¥å•è‡ªåŠ¨åˆ†æ´¾ï¼ˆapp_alarm_ticket è¡¨ï¼‰
# âœ… è¶‹åŠ¿ç›‘æ§ï¼ˆalarm_trend_stat è¡¨ï¼‰
#
# å¦‚éœ€å…³é—­æŸäº›åŠŸèƒ½ï¼Œå–æ¶ˆæ³¨é‡Šå¯¹åº”çš„é…ç½®é¡¹å¹¶è®¾ç½®ä¸º false
# ========================================

# ========================================
# ğŸ“ æœ€å°é…ç½®ç¤ºä¾‹ï¼ˆåªåŒ…å«å¿…éœ€é…ç½®ï¼‰
# ========================================
# å¦‚æœä½ æƒ³å¿«é€Ÿæµ‹è¯•ï¼Œåªéœ€é…ç½®ä»¥ä¸‹3é¡¹å³å¯ï¼š
#
# spring.datasource.url=jdbc:mysql://localhost:3306/one_agent?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
# spring.datasource.username=root
# spring.datasource.password=your_password
# one-agent.responsibility.default-owner=zhangsan
#
# å…¶ä»–é…ç½®é‡‡ç”¨é»˜è®¤å€¼å³å¯æ­£å¸¸è¿è¡Œï¼

# ========================================
# ğŸ”„ YAML æ ¼å¼é…ç½®ç¤ºä¾‹
# ========================================
# å¦‚æœä½ æ›´å–œæ¬¢ YAML æ ¼å¼ï¼Œå¯ä»¥åˆ›å»º application.yml æ–‡ä»¶ï¼š
#
# spring:
#   application:
#     name: one-agent-4j
#   datasource:
#     url: jdbc:mysql://localhost:3306/one_agent?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
#     username: root
#     password: your_password
#     driver-class-name: com.mysql.cj.jdbc.Driver
#
# one-agent:
#   responsibility:
#     default-owner: "zhangsan"
#     service-owners:
#       payment-service: "lisi"
#       order-service: "wangwu"
#     feishu-mapping:
#       zhangsan: "ou_xxx123"
#       lisi: "ou_xxx456"
#
#   ai-denoise:
#     enabled: true
#
# langchain4j:
#   open-ai:
#     chat-model:
#       api-key: ${OPENAI_API_KEY:}
#       base-url: ${OPENAI_BASE_URL:https://api.siliconflow.cn}
#       model-name: ${OPENAI_MODEL_NAME:deepseek-ai/DeepSeek-V3}
#
# logging:
#   level:
#     root: INFO
#     com.all.in.one.agent: DEBUG
