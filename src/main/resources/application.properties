spring.application.name=one-agent-4j
spring.profiles.active=dev
server.port=8080

# LangChain4J OpenAI 配置
langchain4j.open-ai.chat-model.api-key=${OPENAI_API_KEY:your-api-key-here}
langchain4j.open-ai.chat-model.base-url=${OPENAI_BASE_URL:https://api.siliconflow.cn}
langchain4j.open-ai.chat-model.model-name=${OPENAI_MODEL_NAME:deepseek-ai/DeepSeek-V3}
langchain4j.open-ai.chat-model.temperature=0.7
langchain4j.open-ai.chat-model.max-tokens=2000
langchain4j.open-ai.chat-model.timeout=60

# ========== One Agent 配置 ==========
# 是否启用（默认 true，可设置为 false 禁用）
one-agent.enabled=true

# 采样率（0.0-1.0，1.0 表示 100% 采样）
# 注意：采样率仅用于 HTTP 上报，不影响本地持久化和 AI 判断
# 建议：启用 AI 去噪时，设置为 1.0，让 AI 来决定是否处理
one-agent.sampling-rate=1.0

# ========== 存储策略配置 ==========
# 是否启用 HTTP 上报（默认 false）
one-agent.storage-strategy.enable-http-report=false
# HTTP 上报地址（仅在 enable-http-report=true 时生效）
one-agent.server-url=http://localhost:9090

# 是否启用本地持久化（默认 true）
one-agent.storage-strategy.enable-local-persistence=true
# 是否自动生成工单（默认 true，需要 enable-local-persistence=true）
one-agent.storage-strategy.enable-ticket-generation=true

# ========== HTTP 上报策略 ==========
# 上报模式: sync(同步)/async(异步)/batch(批量)
one-agent.report-strategy.mode=async
one-agent.report-strategy.queue-size=1000
one-agent.report-strategy.thread-pool-size=2

# ========== 异常捕获配置 ==========
one-agent.capture-config.enable-filter=true
one-agent.capture-config.enable-controller-advice=true
one-agent.capture-config.enable-aop=true

# ========== AI 智能去噪配置 ==========
# 是否启用 AI 去噪（默认 false）
one-agent.ai-denoise.enabled=true
# AI 去噪回看时间窗口（分钟）
one-agent.ai-denoise.lookback-minutes=2
# AI 去噪最大历史记录数
one-agent.ai-denoise.max-history-records=20

# ========== 数据库配置 ==========
spring.datasource.url=jdbc:mysql://localhost:3306/one_agent?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# MyBatis-Plus 配置
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
mybatis-plus.global-config.db-config.id-type=auto

# 日志配置
logging.level.root=INFO
logging.level.com.all.in.one.agent=DEBUG
