server:
  port: 8081
  servlet:
    context-path: /

spring:
  application:
    name: one-agent-4j-storage
  
  # 数据库配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/one_agent_4j?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
    
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB
      enabled: true
      
  # MyBatis-Plus配置
  mybatis-plus:
    configuration:
      map-underscore-to-camel-case: true
      log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    global-config:
      db-config:
        logic-delete-field: deleted
        logic-delete-value: 1
        logic-not-delete-value: 0

# 存储模块配置
storage:
  upload:
    max-file-size: 104857600  # 100MB
    max-file-count: 10
    temp-dir: /tmp/storage
    enable-multipart: true
    chunk-size: 5242880  # 5MB
    
  preview:
    enabled: true
    url-expiration: 3600  # 1小时
    max-preview-size: 52428800  # 50MB
    max-text-lines: 1000
    thumbnail-size: 200
    
  security:
    enable-file-type-check: true
    enable-file-size-limit: true
    enable-filename-sanitization: true
    enable-virus-scan: false
    allowed-file-types:
      - jpg
      - jpeg
      - png
      - gif
      - bmp
      - webp
      - svg
      - pdf
      - doc
      - docx
      - xls
      - xlsx
      - ppt
      - pptx
      - txt
      - md
      - json
      - xml
      - yaml
      - yml
      - zip
      - rar
      - 7z
      - tar
      - gz
      - mp3
      - wav
      - ogg
      - flac
      - mp4
      - avi
      - mov
      - wmv
      - flv
      - webm
    forbidden-file-types:
      - exe
      - bat
      - cmd
      - com
      - pif
      - scr
      - jar
      - js
      - vbs
      - sh
      
  cache:
    enabled: true
    expiration: 300  # 5分钟
    max-entries: 1000
    cache-dir: /tmp/storage-cache

# 日志配置
logging:
  level:
    com.all.in.one.agent.storage: DEBUG
    org.springframework.web: INFO
    software.amazon.awssdk: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n" 